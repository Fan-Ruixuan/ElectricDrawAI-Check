# app/config/review_rules.py
# 电气审查5大核心规则+专用提示词，按维度拆分，方便调用
ELECTRIC_REVIEW_RULES = {
    # 对应5条核心审查规则，key与你的审查维度一致
    "wire_color": {
        "name": "电线颜色标准检查",
        "prompt": """请严格检查电线颜色及导线规范，要求如下：
1. 相线L1/L2/L3必须分别采用黄/绿/红色，严禁混用
2. 零线N强制采用蓝色，地线PE强制采用黄绿双色，不得替代
3. 二次回路导线需为铜芯线，电流回路截面积≥4mm²，电压回路截面积≥2.5mm²
请列出所有不符合项，标注违规位置并给出具体整改建议"""
    },
    "symbol_standard": {
        "name": "符号使用规范性检查",
        "prompt": """请按国标审查电气符号及表述规范，要求如下：
1. 所有电气符号必须符合GB/T 4728国家/行业标准，符号含义需清晰对应设备功能
2. 设计说明中严禁指定任何设备厂家、型号、品牌，需保持通用性
3. 设备材料清单不得包含产权分界点相关设备，且禁止标注设备品牌
请列出不规范符号及违规表述，给出合规修改示例"""
    },
    "safety_distance": {
        "name": "安全间距检查",
        "prompt": """请逐项核查设备布置安全间距，需满足以下硬性要求：
1. 油浸变压器：1000kVA及以下-外廓距墙≥600mm、距门≥800mm；1250kVA及以上-距墙≥800mm、距门≥1000mm
2. 干式变压器：外廓距墙≥600mm，操作净距≥1000mm，多台并列间距≥1000mm
3. 高压配电柜：柜顶距屋顶≥800mm，有梁时梁下距柜顶≥600mm
4. 高压配电室通道：单排柜前≥1500mm，双排面对面柜前≥2000mm
请标注间距不足的设备位置，给出调整建议及合规间距数值"""
    },
    "load_balance": {
        "name": "负载平衡检查",
        "prompt": """请审查负载配置及供电合理性，核心要求：
1. 变压器数量、容量、联络方式必须与供电方案完全一致，无偏差
2. 电容补偿容量：10kV变电所取变压器容量20%~30%，35kV及以上取10%~30%
3. 两路及以上供电系统，需配置可靠联络闭锁，严禁合环运行风险
请指出负载失衡、补偿容量不合理、供电风险点，给出优化方案"""
    },
    "grounding_spec": {
        "name": "接地规范检查",
        "prompt": """请全面审查接地设计合规性，强制要求：
1. 接地电阻设计值≤4Ω，满足接地导通要求
2. 人工接地网外缘需闭合，各角做圆弧处理（圆弧半径≥均压带间距的1/2）
3. 接地极：顶面埋设≥0.8m，水平间距≥5m，垂直接地极间距≥自身长度2倍
4. 发电机室需设独立接地网，发电机单独接地，不与其他系统共用
5. 应急电源与电网间必须设可靠闭锁装置，杜绝倒送电隐患
请列出接地违规项，给出接地网优化及闭锁装置配置建议"""
    }
}

# 整合版通用提示词（给AI一次性全维度审查用）
GENERAL_REVIEW_PROMPT = """你是资深电气设计审核工程师，需按以下5大核心维度，全面审查电气设计图纸，识别潜在设计问题并提供可落地改进建议
审查维度及标准如下：
1. 电线颜色标准：{wire_color}
2. 符号使用规范：{symbol_standard}
3. 安全间距要求：{safety_distance}
4. 负载平衡配置：{load_balance}
5. 接地设计规范：{grounding_spec}

请输出结构化审查报告，格式固定为：
【总体结论】：说明图纸整体合规性，是否存在重大隐患
【问题列表】：按5个维度分类列出所有问题，标注疑似位置、违规详情
【改进建议】：对应每个问题给出具体、可操作的整改措施，明确合规标准"""